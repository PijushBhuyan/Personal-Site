<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Kana Flashcards</title>

<style>
  body {
    margin: 0;
    font-family: system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
    background: #111;
    color: #eee;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 20px;
  }

  h1 { margin: 8px 0 16px; font-size: 20px; }

  .tabs {
    display: flex;
    width: 100%;
    max-width: 540px;
    justify-content: space-around;
    margin-bottom: 16px;
  }
  .tab {
    flex: 1;
    padding: 10px;
    text-align: center;
    background: #222;
    color: #ccc;
    border-radius: 10px;
    margin: 4px;
    cursor: pointer;
    user-select: none;
    font-weight: 600;
  }
  .tab.active {
    background: #4a90e2;
    color: white;
  }

  #card {
    font-size: clamp(56px, 12vw, 120px);
    background: #222;
    padding: 40px;
    border-radius: 20px;
    box-shadow: 0 6px 18px rgba(0,0,0,0.5);
    width: 92%;
    max-width: 420px;
    text-align: center;
    margin-bottom: 12px;
    transition: 0.2s;
  }

  #romaji {
    font-size: 22px;
    color: #aaa;
    margin-bottom: 12px;
  }

  .buttons {
    display: flex;
    flex-direction: column;
    width: 92%;
    max-width: 420px;
    gap: 10px;
    margin-bottom: 20px;
  }

  .controls {
    display: flex;
    gap: 10px;
  }

  button {
    padding: 12px;
    font-size: 16px;
    border: none;
    border-radius: 10px;
    background: #4a90e2;
    color: white;
    cursor: pointer;
    flex: 1;
  }

  /* ðŸŽ‰ Make Reset Round button visible + styled */
  .buttons > button {
    background: #e94c4c;
  }

  @media (max-width:420px){
    .tabs { gap: 6px; }
    .tab { padding: 8px; font-size: 14px; }
    #card { padding: 28px; }
  }
</style>
</head>

<body>

<h1>Kana Flashcards</h1>

<!-- Tabs -->
<div class="tabs">
  <div class="tab active" onclick="switchTab('hiragana')">Hiragana</div>
  <div class="tab" onclick="switchTab('katakana')">Katakana</div>
  <div class="tab" onclick="switchTab('youon')">Youon</div>
</div>

<div id="card">?</div>
<div id="romaji"></div>

<div class="buttons">
  <div class="controls">
    <button onclick="nextCard()">Next</button>
    <button onclick="playAudio(currentKana)">Play Audio</button>
  </div>

  <!-- Reset Round Button -->
  <button onclick="resetRound()">Reset Round</button>
</div>


<script>
// Hiragana Map
const hiragana = {
  'a':'ã‚','i':'ã„','u':'ã†','e':'ãˆ','o':'ãŠ',
  'ka':'ã‹','ki':'ã','ku':'ã','ke':'ã‘','ko':'ã“',
  'ga':'ãŒ','gi':'ãŽ','gu':'ã','ge':'ã’','go':'ã”',
  'sa':'ã•','shi':'ã—','su':'ã™','se':'ã›','so':'ã',
  'za':'ã–','ji':'ã˜','zu':'ãš','ze':'ãœ','zo':'ãž',
  'ta':'ãŸ','chi':'ã¡','tsu':'ã¤','te':'ã¦','to':'ã¨',
  'da':'ã ','ji':'ã¢','zu':'ã¥','de':'ã§','do':'ã©',
  'na':'ãª','ni':'ã«','nu':'ã¬','ne':'ã­','no':'ã®',
  'ha':'ã¯','hi':'ã²','fu':'ãµ','he':'ã¸','ho':'ã»',
  'ba':'ã°','bi':'ã³','bu':'ã¶','be':'ã¹','bo':'ã¼',
  'pa':'ã±','pi':'ã´','pu':'ã·','pe':'ãº','po':'ã½',
  'ma':'ã¾','mi':'ã¿','mu':'ã‚€','me':'ã‚','mo':'ã‚‚',
  'ya':'ã‚„','yu':'ã‚†','yo':'ã‚ˆ',
  'ra':'ã‚‰','ri':'ã‚Š','ru':'ã‚‹','re':'ã‚Œ','ro':'ã‚',
  'wa':'ã‚','wo':'ã‚’','n':'ã‚“'
};

// Katakana Map
const katakana = {
  'a':'ã‚¢','i':'ã‚¤','u':'ã‚¦','e':'ã‚¨','o':'ã‚ª',
  'ka':'ã‚«','ki':'ã‚­','ku':'ã‚¯','ke':'ã‚±','ko':'ã‚³',
  'ga':'ã‚¬','gi':'ã‚®','gu':'ã‚°','ge':'ã‚²','go':'ã‚´',
  'sa':'ã‚µ','shi':'ã‚·','su':'ã‚¹','se':'ã‚»','so':'ã‚½',
  'za':'ã‚¶','ji':'ã‚¸','zu':'ã‚º','ze':'ã‚¼','zo':'ã‚¾',
  'ta':'ã‚¿','chi':'ãƒ','tsu':'ãƒ„','te':'ãƒ†','to':'ãƒˆ',
  'da':'ãƒ€','ji':'ãƒ‚','zu':'ãƒ…','de':'ãƒ‡','do':'ãƒ‰',
  'na':'ãƒŠ','ni':'ãƒ‹','nu':'ãƒŒ','ne':'ãƒ','no':'ãƒŽ',
  'ha':'ãƒ','hi':'ãƒ’','fu':'ãƒ•','he':'ãƒ˜','ho':'ãƒ›',
  'ba':'ãƒ','bi':'ãƒ“','bu':'ãƒ–','be':'ãƒ™','bo':'ãƒœ',
  'pa':'ãƒ‘','pi':'ãƒ”','pu':'ãƒ—','pe':'ãƒš','po':'ãƒ',
  'ma':'ãƒž','mi':'ãƒŸ','mu':'ãƒ ','me':'ãƒ¡','mo':'ãƒ¢',
  'ya':'ãƒ¤','yu':'ãƒ¦','yo':'ãƒ¨',
  'ra':'ãƒ©','ri':'ãƒª','ru':'ãƒ«','re':'ãƒ¬','ro':'ãƒ­',
  'wa':'ãƒ¯','wo':'ãƒ²','n':'ãƒ³'
};

// Youon Map
const youon = {
  'kya':'ãã‚ƒ','kyu':'ãã‚…','kyo':'ãã‚‡',
  'gya':'ãŽã‚ƒ','gyu':'ãŽã‚…','gyo':'ãŽã‚‡',
  'sha':'ã—ã‚ƒ','shu':'ã—ã‚…','sho':'ã—ã‚‡',
  'ja':'ã˜ã‚ƒ','ju':'ã˜ã‚…','jo':'ã˜ã‚‡',
  'cha':'ã¡ã‚ƒ','chu':'ã¡ã‚…','cho':'ã¡ã‚‡',
  'nya':'ã«ã‚ƒ','nyu':'ã«ã‚…','nyo':'ã«ã‚‡',
  'hya':'ã²ã‚ƒ','hyu':'ã²ã‚…','hyo':'ã²ã‚‡',
  'bya':'ã³ã‚ƒ','byu':'ã³ã‚…','byo':'ã³ã‚‡',
  'pya':'ã´ã‚ƒ','pyu':'ã´ã‚…','pyo':'ã´ã‚‡',
  'mya':'ã¿ã‚ƒ','myu':'ã¿ã‚…','myo':'ã¿ã‚‡',
  'rya':'ã‚Šã‚ƒ','ryu':'ã‚Šã‚…','ryo':'ã‚Šã‚‡',

  'kya_k':'ã‚­ãƒ£','kyu_k':'ã‚­ãƒ¥','kyo_k':'ã‚­ãƒ§',
  'gya_k':'ã‚®ãƒ£','gyu_k':'ã‚®ãƒ¥','gyo_k':'ã‚®ãƒ§',
  'sha_k':'ã‚·ãƒ£','shu_k':'ã‚·ãƒ¥','sho_k':'ã‚·ãƒ§',
  'ja_k':'ã‚¸ãƒ£','ju_k':'ã‚¸ãƒ¥','jo_k':'ã‚¸ãƒ§',
  'cha_k':'ãƒãƒ£','chu_k':'ãƒãƒ¥','cho_k':'ãƒãƒ§',
  'nya_k':'ãƒ‹ãƒ£','nyu_k':'ãƒ‹ãƒ¥','nyo_k':'ãƒ‹ãƒ§',
  'hya_k':'ãƒ’ãƒ£','hyu_k':'ãƒ’ãƒ¥','hyo_k':'ãƒ’ãƒ§',
  'bya_k':'ãƒ“ãƒ£','byu_k':'ãƒ“ãƒ¥','byo_k':'ãƒ“ãƒ§',
  'pya_k':'ãƒ”ãƒ£','pyu_k':'ãƒ”ãƒ¥','pyo_k':'ãƒ”ãƒ§',
  'mya_k':'ãƒŸãƒ£','myu_k':'ãƒŸãƒ¥','myo_k':'ãƒŸãƒ§',
  'rya_k':'ãƒªãƒ£','ryu_k':'ãƒªãƒ¥','ryo_k':'ãƒªãƒ§'
};

let currentSet = hiragana;
let currentKana = '';
let deck = [];

function shuffle(arr) {
  for (let i = arr.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [arr[i], arr[j]] = [arr[j], arr[i]];
  }
  return arr;
}

function rebuildDeck() {
  deck = shuffle(Object.keys(currentSet).slice());
}

function resetRound() {
  rebuildDeck();
  nextCard();
}

function switchTab(type) {
  document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));

  if (type === 'hiragana') {
    currentSet = hiragana;
    document.querySelectorAll('.tab')[0].classList.add('active');
  } else if (type === 'katakana') {
    currentSet = katakana;
    document.querySelectorAll('.tab')[1].classList.add('active');
  } else {
    currentSet = youon;
    document.querySelectorAll('.tab')[2].classList.add('active');
  }

  rebuildDeck();
  nextCard();
}

function nextCard() {
  if (deck.length === 0) rebuildDeck();

  const rom = deck.pop();
  const kana = currentSet[rom];

  currentKana = kana;
  document.getElementById('card').innerText = kana;
  document.getElementById('romaji').innerText = rom;
}

function playAudio(kana) {
  const utter = new SpeechSynthesisUtterance(kana);
  utter.lang = 'ja-JP';
  utter.rate = 0.9;
  speechSynthesis.cancel();
  speechSynthesis.speak(utter);
}

rebuildDeck();
nextCard();
</script>

</body>
</html>
